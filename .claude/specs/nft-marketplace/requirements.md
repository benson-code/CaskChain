# 需求規格 - 威士忌NFT憑證系統

## 簡介

威士忌NFT憑證系統為每位在CaskChain存放威士忌的客戶提供專屬的數位憑證。這個NFT憑證作為威士忌所有權的數位化證明，客戶可以用它來提取威士忌或轉讓所有權。系統設計簡單直接，專注於數位憑證的生成、管理和驗證功能。

此憑證系統與現有CaskChain基礎設施整合，在客戶存放威士忌時自動生成NFT，並提供簡單的轉讓和驗證機制。

## 與產品願景的一致性

此功能支持CaskChain數位化威士忌倉儲管理的使命：

- **數位化憑證**：將傳統紙本憑證數位化，提供安全可靠的所有權證明
- **簡化流程**：客戶存酒後自動獲得NFT憑證，無需複雜操作
- **便利管理**：客戶可輕鬆查看和管理自己的威士忌收藏
- **安全轉讓**：透過區塊鏈技術確保憑證轉讓的安全性和透明度
- **未來擴展**：為未來可能的交易功能奠定基礎

## 需求

### 需求1：自動NFT憑證生成

**使用者故事：** 作為客戶，當我將威士忌存放到CaskChain時，我想要自動獲得一個專屬的NFT憑證，以便我能擁有數位化的所有權證明。

#### 驗收條件

1. 當客戶完成威士忌存放程序時，系統應自動觸發NFT憑證生成流程
2. 當NFT生成時，系統應包含威士忌的基本資訊（品名、年份、存放位置、存放日期）
3. 當NFT生成完成時，系統應向客戶發送通知並提供憑證查看連結
4. 當客戶查看憑證時，系統應顯示威士忌詳情和唯一的NFT識別碼
5. 若NFT生成失敗，系統應自動重試並記錄錯誤供管理員處理
6. 當憑證生成時，系統應將NFT資訊同步到客戶的個人收藏中

### 需求2：憑證查看與管理

**使用者故事：** 作為客戶，我想要查看和管理我的威士忌NFT憑證，以便我能追蹤我的威士忌收藏。

#### 驗收條件

1. 當客戶登入帳戶時，系統應在個人頁面顯示「我的威士忌憑證」區塊
2. 當查看憑證列表時，系統應顯示威士忌圖片、名稱、存放日期和憑證狀態
3. 當點擊特定憑證時，系統應顯示詳細資訊包含威士忌規格、存放位置和區塊鏈資訊
4. 當憑證載入時，系統應顯示NFT的唯一識別碼和區塊鏈交易雜湊
5. 若客戶沒有憑證，系統應顯示友善的提示訊息和存酒引導
6. 當憑證更新時，系統應即時反映最新狀態和資訊

### 需求3：憑證轉讓功能

**使用者故事：** 作為憑證擁有者，我想要將我的威士忌NFT憑證轉讓給其他人，以便我能轉移威士忌的所有權。

#### 驗收條件

1. 當查看憑證詳情時，系統應顯示「轉讓憑證」按鈕給憑證擁有者
2. 當啟動轉讓時，系統應要求輸入接收者的錢包地址和轉讓確認
3. 當提交轉讓申請時，系統應驗證當前使用者確實擁有該憑證
4. 當區塊鏈交易確認時，系統應更新憑證所有權並通知雙方
5. 若轉讓失敗，系統應顯示錯誤原因並保留原有所有權
6. 當轉讓完成時，系統應記錄轉讓歷史並更新憑證狀態

### 需求4：取酒驗證系統

**使用者故事：** 作為客戶，我想要用我的NFT憑證來提取威士忌，以便我能證明我的所有權並取回我的酒。

#### 驗收條件

1. 當客戶要求取酒時，系統應驗證其錢包地址是否擁有對應的NFT憑證
2. 當驗證成功時，系統應顯示憑證詳情和「確認取酒」選項
3. 當確認取酒時，系統應將憑證狀態更新為「已提取」並記錄取酒日期
4. 當取酒完成時，系統應保留憑證作為歷史紀錄但標示為已使用
5. 若驗證失敗，系統應清楚說明無法取酒的原因
6. 當取酒程序完成時，系統應向客戶發送確認通知

### 需求5：憑證驗證與查詢

**使用者故事：** 作為管理員或客戶，我想要驗證NFT憑證的真實性，以便我能確認威士忌所有權的有效性。

#### 驗收條件

1. 當輸入NFT識別碼時，系統應查詢並顯示對應的憑證資訊
2. 當驗證憑證時，系統應檢查區塊鏈上的所有權狀態
3. 當憑證有效時，系統應顯示綠色驗證標誌和詳細資訊
4. 當憑證無效或不存在時，系統應顯示紅色警告和錯誤說明
5. 若區塊鏈連接失敗，系統應顯示暫時無法驗證的訊息
6. 當查詢完成時，系統應記錄查詢活動供安全審核

## 非功能性需求

### 效能
- 憑證生成必須在威士忌存放確認後30秒內完成
- 憑證查看頁面載入時間不得超過2秒
- 憑證驗證查詢必須在3秒內返回結果
- 系統必須支援最多1,000名同時在線客戶
- 憑證轉讓交易必須在區塊鏈確認後立即更新狀態

### 安全性
- 所有憑證操作必須透過區塊鏈智能合約驗證
- NFT生成和轉讓需要使用者錢包授權
- 取酒驗證必須確保只有憑證擁有者能提取威士忌
- 系統必須防止憑證重複使用和偽造
- 個人客戶資訊不得在公開憑證中暴露

### 可靠性
- 憑證系統必須維持99%以上的正常運行時間
- NFT生成失敗時必須自動重試最多3次
- 所有憑證資料必須在區塊鏈和本地資料庫雙重保存
- 系統必須能從區塊鏈網路中斷中自動恢復
- 憑證歷史紀錄必須永久保存且不可篡改

### 易用性
- 客戶無需手動操作即可獲得憑證（自動生成）
- 憑證介面必須在手機和電腦上都能正常使用
- 所有操作必須有清楚的確認訊息和進度顯示
- 錯誤訊息必須用簡單易懂的語言說明
- 憑證查看和轉讓流程不得超過3個步驟